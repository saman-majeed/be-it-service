<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head') %>
        <title>Be IT:Service Checkout</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/checkout.css">
</head>

<body>

    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                <span class="d-inline-flex align-items-center">
                    <span class="bubble">Be</span>
                    IT:SERVICE
                </span>
            </a>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="/#start">Start</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#offer">Offer</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container checkout-box">
        <div id="alertBox"></div>
        <h3 class="section-title">Your Service Order</h3>

        <table class="table align-middle">
            <thead>
                <tr>
                    <th>Service</th>
                    <th class="text-end">Price</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="d-flex align-items-center">
                        <img src="https://m.media-amazon.com/images/I/81vCPnQtyCL._AC_SL1500_.jpg" class="product-img"
                            alt="IT Service Bundle">
                        <span>Premium System Boost & Repair Bundle</span>
                    </td>
                    <td class="text-end">$129</td>
                </tr>
                <tr>
                    <td class="d-flex align-items-center">
                        <img src="https://m.media-amazon.com/images/I/51iDfbtishL.jpg" class="product-img"
                            alt="Consulting">
                        <span>1 Hour Expert Consulting (Remote)</span>
                    </td>
                    <td class="text-end">$60</td>
                </tr>
            </tbody>
        </table>

        <h3 class="section-title">Order Summary</h3>
        <ul class="list-group mb-4">
            <li class="list-group-item d-flex justify-content-between">
                <span>Subtotal</span><strong>$189</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
                <span>Handling Fee (Service Drop-off/Pickup)</span><strong>$10</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between text-success fw-bold">
                <span>Total</span><strong>$199</strong>
            </li>
        </ul>

        <h3 class="section-title">Contact & Service Details</h3>

        <form id="checkoutForm" action="/process-order" method="POST">
            <div class="mb-3">
                <label class="form-label">Device Drop-off/Pickup Address</label>
                <input type="text" id="address" name="address" class="form-control"
                    placeholder="Enter your address for service" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Primary Contact Number</label>
                <input type="text" id="contact" name="contact" class="form-control" placeholder="e.g., +1 555 123 4567"
                    required>
            </div>
            <div class="mb-3">
                <label class="form-label">Brief Description of Issue</label>
                <textarea id="issue" name="issue" class="form-control" rows="3"
                    placeholder="e.g., Laptop slow since last update; blue screen error."></textarea>
            </div>

            <h3 class="section-title">Payment Method</h3>
            <div class="form-check mb-2">
                <input class="form-check-input" type="radio" name="payment" id="cod" value="cod">
                <label class="form-check-label" for="cod">Pay on Delivery</label>
            </div>
            <div class="form-check mb-4">
                <input class="form-check-input" type="radio" name="payment" id="online" value="online">
                <label class="form-check-label" for="online">Pay Online Now</label>
            </div>

            <a href="/payment" class="btn btn-theme w-100 mb-2">Proceed to Online Payment</a>
            <button type="submit" class="btn btn-theme w-100" id="placeOrderBtn">
                Confirm Service Booking
            </button>
        </form>
    </div>

    <div class="modal fade" id="orderModal" tabindex="-1" aria-labelledby="orderModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="orderModalLabel">✅ Service Booked!</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <p class="fs-5">Your <strong>Be IT:Service</strong> booking is confirmed.</p>
                    <p class="text-muted">A specialist will contact you shortly.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-theme" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.getElementById("checkoutForm").addEventListener("submit", function (e) {
            const address = document.getElementById("address").value.trim();
            const contact = document.getElementById("contact").value.trim();
            const payment = document.querySelector('input[name="payment"]:checked');
            const alertBox = document.getElementById("alertBox");
            alertBox.innerHTML = "";

            if (!address || !contact || !payment) {
                e.preventDefault();
                alertBox.innerHTML = `<div class="alert-theme">⚠️ Please fill out the address, contact number, and select a payment method.</div>`;
            }
            // If valid, the form submits to /process-order
        });
    </script>
</body>

</html>
