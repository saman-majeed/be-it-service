<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('partials/head') %>
        <title>Order Preview</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/checkout.css">
</head>

<body class="bg-light">
    <div class="container mt-5" style="max-width: 800px;">
        <h2 class="mb-4 text-center">Order Preview</h2>

        <div class="card shadow-sm p-4 mb-4">
            <h4 class="border-bottom pb-2">Shipping Details</h4>
            <div class="row mt-3">
                <div class="col-md-4 text-muted">Address:</div>
                <div class="col-md-8 fw-bold">
                    <%= orderInfo.address %>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-4 text-muted">Contact:</div>
                <div class="col-md-8 fw-bold">
                    <%= orderInfo.contact %>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-4 text-muted">Payment:</div>
                <div class="col-md-8 fw-bold">
                    <%= orderInfo.paymentMethod==='cod' ? 'Pay on Delivery' : 'Online Payment' %>
                </div>
            </div>
        </div>

        <div class="card shadow-sm p-4 mb-4">
            <h4 class="border-bottom pb-2">Items</h4>
            <table class="table mt-3 align-middle">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th class="text-end">Price</th>
                    </tr>
                </thead>
                <tbody>
                    <% cart.forEach(item=> { %>
                        <tr>
                            <td>
                                <%= item.name %>
                            </td>
                            <td class="text-end">$<%= item.price %>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>

            <div class="border-top pt-3 mt-3">
                <div class="d-flex justify-content-between">
                    <span>Subtotal</span>
                    <strong>$<%= orderInfo.subtotal %></strong>
                </div>

                <% if (orderInfo.discount> 0) { %>
                    <div class="d-flex justify-content-between text-success">
                        <span>Discount Applied (SAVE10)</span>
                        <strong>-$<%= orderInfo.discount %></strong>
                    </div>
                    <% } %>

                        <div class="d-flex justify-content-between">
                            <span>Handling Fee</span>
                            <strong>$10</strong>
                        </div>

                        <hr>

                        <div class="d-flex justify-content-between text-success mt-2">
                            <h3>Grand Total</h3>
                            <h3>$<%= orderInfo.total %>
                            </h3>
                        </div>
            </div>
        </div>

        <div class="d-flex gap-3 mb-5">
            <a href="/checkout" class="btn btn-secondary w-50 py-2">Go Back to Cart</a>

            <form action="/order/confirm" method="POST" class="w-50">
                <button type="submit" class="btn btn-success w-100 py-2 fw-bold">
                    Confirm & Place Order <i class="fa-solid fa-check ms-2"></i>
                </button>
            </form>
        </div>
    </div>
</body>

</html>